(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{276:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"github-actions-部署项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-actions-部署项目"}},[t._v("#")]),t._v(" Github Actions 部署项目")]),t._v(" "),s("h2",{attrs:{id:"github-actions-是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-actions-是什么"}},[t._v("#")]),t._v(" Github Actions 是什么")]),t._v(" "),s("p",[t._v("GithubActions 是 Github 提供的持续集成服务。Github 提供一台虚拟的服务器实例，在此实例中可以通过自定义的 Actions 执行命令，实现构建代码、测试代码、打包代码、发布代码、部署代码等操作")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/marketplace?type=actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("marketplace"),s("OutboundLink")],1),t._v(" 提供了大量 Github 官方与 第三方 Actions")]),t._v(" "),s("p",[t._v("actions 由以下部分组成")]),t._v(" "),s("ul",[s("li",[t._v("workflow：工作流程，（一个完整的持续集成服务）")]),t._v(" "),s("li",[t._v("job：任务，n 个 job 组成一个 workflow，一次持续集成服务的运行可完成多个 job")]),t._v(" "),s("li",[t._v("step：步骤，n 个 step 组成一个 job，里面的 step 按照编写顺序运行")]),t._v(" "),s("li",[t._v("action：动作，n 个 action 组成一个 step")])]),t._v(" "),s("h2",{attrs:{id:"配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),s("p",[t._v("Github Actions 的配置文件必须存放到项目根目录 .github/workflows 文件夹下面。并且以 name.yml 的形式命名（name 自定义）")]),t._v(" "),s("p",[t._v("配置文件中常见字段")]),t._v(" "),s("p",[t._v("on 表示触发事件")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 触发条件，当 master 分之有 push 提交后")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n")])])]),s("p",[t._v("job 任务列表相关字段")]),t._v(" "),s("ul",[s("li",[t._v("name：任务名称")]),t._v(" "),s("li",[t._v("runs-on：虚拟机环境，可选 ubuntu-latest/windows-latest/macos-latest")]),t._v(" "),s("li",[t._v("needs：执行任务的依赖顺序")]),t._v(" "),s("li",[t._v("steps：执行步骤，每个任务可将需要执行的内容划分为不同步骤\n"),s("ul",[s("li",[t._v("name：步骤名称")]),t._v(" "),s("li",[t._v("uses：官方与第三方 Actions")]),t._v(" "),s("li",[t._v("with：Actions 入参")]),t._v(" "),s("li",[t._v("run：环境执行命令 shell命令")]),t._v(" "),s("li",[t._v("env：环境变量")])])])]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拉取代码")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装依赖和打包文件")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install and Build\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install "),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" npm run Build\n")])])]),s("h3",{attrs:{id:"基于-github-actions-部署一个静态站点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于-github-actions-部署一个静态站点"}},[t._v("#")]),t._v(" 基于 Github Actions 部署一个静态站点")]),t._v(" "),s("h3",{attrs:{id:"github-token-and-actions-secrets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-token-and-actions-secrets"}},[t._v("#")]),t._v(" Github Token and Actions Secrets")]),t._v(" "),s("p",[t._v("首先创建 GitHub Token。进入 github.com，右上角进入 settings 配置页面，选择侧边栏 Developer settings，点击 Personal access tokens，点击 Generate new token")]),t._v(" "),s("p",[t._v("输入 Note，譬如 TOKEN，Expiration 选择 no expiration (永久)，select scopes 选择 repo 和 workflow。确认无误后点击 Generate Token，生成一个 TOKEN（生成完之后记得复制，因为页面关闭之后无法再查看生成的 TOKEN）")]),t._v(" "),s("p",[t._v("创建 Actions Secrets。进入项目仓库，点击 Settings 导航栏，点击 Secrets 的 Actions，点击 New repository secret")]),t._v(" "),s("p",[t._v("在 Name 中输入 秘钥名称（Token），在 Value 上粘贴刚才生成的 TOKEN，确认无误后点击 Add Secret，生成一个 Actions Secret")]),t._v(" "),s("h3",{attrs:{id:"gh-pages-分支"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gh-pages-分支"}},[t._v("#")]),t._v(" gh-pages 分支")]),t._v(" "),s("p",[t._v("Github 创建 gh-pages 分支后会自动部署 Github Pages 上，所以利用该特性把生成的静态文件提交到 gh-pages 分支上就可以通过 Github Pages 自动生成静态站点")]),t._v(" "),s("p",[t._v("该操作无需手动，后面交由第三方 Actions 帮助你将代码推送到 gh-pages 分支上。要是 Github Pages 生效，还需要进行一些配置")]),t._v(" "),s("p",[t._v("进入仓库，点击 Settings，点击 Pages，点击 Branch，选择 gh-pages（第一次创建没有该分支，执行一次 ci 操作之后，第三方 Actions 会自动帮你新建一个 gh-pages 分支并提交）。会有 root 与 docs 两个文件夹选项，若把文档文件放到 docs 文件夹中，则选择 docs，否则全部清空选择 root")]),t._v(" "),s("p",[t._v("点击 Save，就会通过 Github Pages 自动生成静态站点了")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("https://<username>.github.io/<repository>\n")])])]),s("h3",{attrs:{id:"配置-ci-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-ci-yml"}},[t._v("#")]),t._v(" 配置 ci.yml")]),t._v(" "),s("p",[t._v("在项目的根目录下创建 .github/workflows 文件夹。在 workflows 文件下创建一个 ci.yml 文件。文件内容如下")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CI\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install And Build\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install "),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" npm run build\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DeployGP\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peaceiris/actions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("gh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages@v3\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.TOKEN "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("publish_dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./dist\n")])])]),s("p",[t._v("步骤解释")]),t._v(" "),s("ul",[s("li",[t._v("Checkout：检出代码，使仓库代码保持最新的状态")]),t._v(" "),s("li",[t._v("Install And Build：安装依赖和构建文件")]),t._v(" "),s("li",[t._v("DeployGP：部署文件到 Github Pages")])]),t._v(" "),s("p",[t._v("actions/checkout@v2 是官方 Actions，用于自动检出最新代码")]),t._v(" "),s("p",[t._v("actions-gh-pages 是一个第三方 Actions，用于自动部署代码到 Github Pages。入参使用 with 配置，"),s("a",{attrs:{href:"https://github.com/peaceiris/actions-gh-pages#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置列表"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("目前为止，基本步骤已全部完成，每次将代码提交到仓库的时候，就会自动触发 ci.yml 脚本。打开仓库，点击 Actions，就能看到全部 workflows")]),t._v(" "),s("p",[t._v("Tip：Github 的私有仓库，无法直接部署到 github pages 使用，需要升级服务或者将仓库设为 public")]),t._v(" "),s("h2",{attrs:{id:"使用-github-actions-部署到阿里云服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-github-actions-部署到阿里云服务器"}},[t._v("#")]),t._v(" 使用 Github Actions 部署到阿里云服务器")]),t._v(" "),s("h3",{attrs:{id:"配置文件-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件-2"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" CI\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Install And Build\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" npm install "),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" npm run build\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DeployGP\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" peaceiris/actions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("gh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages@v3\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.TOKEN "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("publish_dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ./dist\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DeployECS\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" easingthemes/ssh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy@v2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ARGS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'-avz --delete'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SSH_PRIVATE_KEY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ECS_PRIVATE_KEY "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("REMOTE_HOST")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ECS_HOST "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("REMOTE_USER")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.ECS_USER "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SOURCE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dist\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TARGET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /data/apps/docs\n")])])]),s("p",[t._v("ssh-deploy@v3 是一个第三方 Actions，用于自动部署代码到服务器。入参使用 env 进行配置，"),s("a",{attrs:{href:"https://github.com/easingthemes/ssh-deploy#configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置列表"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[t._v("SSH_PRIVATE_KEY：SSH 秘钥")]),t._v(" "),s("li",[t._v("REMOTE_HOST：服务器地址")]),t._v(" "),s("li",[t._v("REMOTE_USER：服务器用户")]),t._v(" "),s("li",[t._v("SOURCE：复制到阿里云服务器的文件夹名称")]),t._v(" "),s("li",[t._v("TARGET：dist 文件夹将放在 /data/apps/doc")])]),t._v(" "),s("p",[t._v("在项目仓库 Settings -> Secrets -> Actions -> New repository secret 添加 ECS_PRIVATE_KEY ECS_HOST ECS_USER 环境变量")]),t._v(" "),s("h3",{attrs:{id:"秘钥生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#秘钥生成"}},[t._v("#")]),t._v(" 秘钥生成")]),t._v(" "),s("p",[t._v("登陆 "),s("a",{attrs:{href:"https://ecs.console.aliyun.com/?spm=a2c63.p38356.0.0.1fa52580XTJ0mc&accounttraceid=5cd503660f5142728242b6febda4c1e9iaph#/keyPair/region/cn-hongkong",target:"_blank",rel:"noopener noreferrer"}},[t._v("阿里云后台"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("侧边栏 秘钥对 -> 创建秘钥对，创建完之后记得绑定绑定秘钥对到服务器实例上。同时也会自动下载秘钥文件，打开文件，将里面的内容复制，添加到项目 Settings Secrets 上 （Tip：生成秘钥之后，记得重启服务器实例，否则秘钥无效）")])])}),[],!1,null,null,null);s.default=e.exports}}]);